{% extends 'index.html' %}
{% load static %}

{% block title %}Tax Categories{% endblock %}

{% block breadcrumbs %}
<h3>Finance Portal</h3>
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Categories</li>
  </ol>
</nav>
{% endblock %}

{% block content %}
<div class="container mt-4">
  {% for category in categories %}
    <div class="card mb-3">
      <div class="card-header d-flex justify-content-between align-items-center">
        <strong>{{ category.category }}</strong>
        <div>
          <a href="{% url 'category_edit' category.id %}" class="btn btn-sm btn-primary">Edit</a>
          <a href="{% url 'category_delete' category.id %}" class="btn btn-sm btn-danger">Delete</a>
        </div>
      </div>
      <ul class="list-group list-group-flush">
        {% for sub in category.subcategories.all %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ sub.sub_cat }}
            <span>
              <a href="{% url 'subcategory_edit' sub.id %}" class="btn btn-sm btn-outline-primary">Edit</a>
              <a href="{% url 'subcategory_delete' sub.id %}" class="btn btn-sm btn-outline-danger">Delete</a>
            </span>
          </li>
        {% empty %}
          <li class="list-group-item text-muted">No sub-categories</li>
        {% endfor %}
      </ul>
    </div>
  {% empty %}
    <p>No categories found.</p>
  {% endfor %}
</div>
{% endblock %}
